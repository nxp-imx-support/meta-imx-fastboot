From 541fac4f5c2e0e6980a9fa24f55d2289b138b116 Mon Sep 17 00:00:00 2001
From: Elena Popa <elena.popa@nxp.com>
Date: Tue, 24 Sep 2024 11:51:07 +0300
Subject: [PATCH] imx8qxp: add falcon mode support

Signed-off-by: Elena Popa <elena.popa@nxp.com>
---
 plat/imx/imx8qx/imx8qx_bl31_setup.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/plat/imx/imx8qx/imx8qx_bl31_setup.c b/plat/imx/imx8qx/imx8qx_bl31_setup.c
index aa7844b66..5c939b2ee 100644
--- a/plat/imx/imx8qx/imx8qx_bl31_setup.c
+++ b/plat/imx/imx8qx/imx8qx_bl31_setup.c
@@ -1,5 +1,6 @@
 /*
  * Copyright (c) 2015-2022, ARM Limited and Contributors. All rights reserved.
+ * Copyright 2024 NXP
  *
  * SPDX-License-Identifier: BSD-3-Clause
  */
@@ -478,6 +479,11 @@ void bl31_early_platform_setup2(u_register_t arg0, u_register_t arg1,
 
 	bl33_image_ep_info.pc = PLAT_NS_IMAGE_OFFSET;
 	bl33_image_ep_info.spsr = get_spsr_for_bl33_entry();
+	// RAM FDT address
+	bl33_image_ep_info.args.arg0 = (u_register_t)0x83000000;
+	bl33_image_ep_info.args.arg1 = 0U;
+	bl33_image_ep_info.args.arg2 = 0U;
+	bl33_image_ep_info.args.arg3 = 0U;
 #if defined(SPD_opteed) || defined(SPD_trusty)
 	SET_PARAM_HEAD(&bl32_image_ep_info, PARAM_EP, VERSION_1, 0);
 	SET_SECURITY_STATE(bl32_image_ep_info.h.attr, SECURE);
-- 
2.25.1

